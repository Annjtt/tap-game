(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const y={baseClickValue:1,saveInterval:3e4};class v{static show(e,t=2e3){const s=document.createElement("div");s.className="notification",s.textContent=e,document.body.appendChild(s),setTimeout(()=>{s.classList.add("show")},10),setTimeout(()=>{s.classList.remove("show"),setTimeout(()=>{document.body.removeChild(s)},300)},t)}}class w{constructor(){this.currency=0,this.baseClickValue=y.baseClickValue,this.items=[],this.baseAutoIncome=0,this.shopClickBonus=0,this.shopAutoBonus=0,this.shopMultiplier=1,this.lastSave=Date.now(),this.bonusMultipliers={A:1,B:.8,C:.4,D:.3,E:.2,F:.15,G:.1,H:.05}}addCurrency(e){this.currency+=e,this.triggerEvent("currencyChanged")}getCurrency(){return this.currency}getClickValue(){const e=this.baseClickValue,t=this.shopClickBonus*this.shopMultiplier;let s=0;const n=this.getActiveItemsByName();for(const i of Object.values(n))i.stat==="click"&&(s+=i.enhancedValue||i.baseBonus);return e+t+s}getAutoIncome(){const e=this.baseAutoIncome,t=this.shopAutoBonus*this.shopMultiplier;let s=0;const n=this.getActiveItemsByName();for(const i of Object.values(n))i.stat==="auto"&&(s+=i.enhancedValue||i.baseBonus);return e+t+s}addShopClickBonus(e){this.shopClickBonus+=e}addShopAutoBonus(e){this.shopAutoBonus+=e}addShopMultiplier(e){this.shopMultiplier*=e}resetShopBonuses(){this.shopClickBonus=0,this.shopAutoBonus=0,this.shopMultiplier=1}getActiveItemsByName(){const e={};for(const t of this.items){const s=t.name;if(!e[s])e[s]=t;else{const n=e[s].card,i=t.card;this.getCardRank(i)<this.getCardRank(n)&&(e[s]=t)}}return e}getCardRank(e){return{A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7}[e]||7}addItem(e){if(console.log("gameCore.addItem –≤—ã–∑–≤–∞–Ω",e),!e.card){console.warn("–ü—Ä–µ–¥–º–µ—Ç –±–µ–∑ –∫–∞—Ä—Ç—ã:",e);return}const t=this.items.find(s=>s.name===e.name);if(console.log("–ù–∞–π–¥–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–µ–¥–º–µ—Ç:",t),t){const s={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7},n=s[e.card],i=s[t.card];if(console.log("–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–µ–¥–∫–æ—Å—Ç—å:",{newItem:e.name,newCard:e.card,newRank:n,existingItem:t.name,existingCard:t.card,existingRank:i}),n<i){console.log("–ù–û–í–´–ô –ø—Ä–µ–¥–º–µ—Ç —Ä–µ–¥—á–µ –°–¢–ê–†–û–ì–û - –ó–ê–ú–ï–ù–Ø–ï–ú");const o=this.getCompensationForItem(t);this.addCurrency(o);const a=this.items.indexOf(t);this.items[a]=e,v.show(`–ü—Ä–µ–¥–º–µ—Ç "${e.name}" –∑–∞–º–µ–Ω–µ–Ω (${t.card} ‚Üí ${e.card}). –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${o} –¢–µ–Ω–µ–π`)}else{console.log("–ù–û–í–´–ô –ø—Ä–µ–¥–º–µ—Ç –º–µ–Ω–µ–µ —Ä–µ–¥–∫–∏–π –∏–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π - –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –∑–∞ –ù–û–í–´–ô");const o=this.getCompensationForItem(e);this.addCurrency(o),v.show(`–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å "${t.name}" (${t.card}). –ù–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç (${e.card}) –º–µ–Ω–µ–µ —Ä–µ–¥–∫–∏–π. –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${o} –¢–µ–Ω–µ–π`)}}else console.log("–î–æ–±–∞–≤–ª—è–µ–º –ù–û–í–´–ô –ø—Ä–µ–¥–º–µ—Ç"),this.items.push(e);this.triggerEvent("inventoryUpdated")}getCompensationForItem(e){return Math.floor({A:5e3,B:3e3,C:1500,D:800,E:500,F:300,G:150,H:50}[e.card]||50)}removeItem(e){const t=this.items.indexOf(e);t>-1&&(this.items.splice(t,1),this.triggerEvent("inventoryUpdated"))}saveProgress(){const e={currency:this.currency,baseClickValue:this.baseClickValue,shopClickBonus:this.shopClickBonus,shopAutoBonus:this.shopAutoBonus,shopMultiplier:this.shopMultiplier,baseAutoIncome:this.baseAutoIncome,items:this.items,timestamp:Date.now()};localStorage.setItem("tapGameProgress",JSON.stringify(e))}loadProgress(){const e=localStorage.getItem("tapGameProgress");if(e){const t=JSON.parse(e);this.currency=t.currency||0,this.baseClickValue=t.baseClickValue||y.baseClickValue,this.shopClickBonus=t.shopClickBonus||0,this.shopAutoBonus=t.shopAutoBonus||0,this.shopMultiplier=t.shopMultiplier||1,this.baseAutoIncome=t.baseAutoIncome||0,this.items=t.items||[],this.triggerEvent("progressLoaded")}}triggerEvent(e){document.dispatchEvent(new CustomEvent(e,{detail:this}))}startAutoIncome(){setInterval(()=>{this.getAutoIncome()>0&&this.addCurrency(this.getAutoIncome())},1e3)}update(){}}class k{static show(e){const s={A:"#6a0dad",B:"#cc0000",C:"#0066cc",D:"#ffffff",E:"#888888",F:"#777777",G:"#666666",H:"#555555"}[e]||"#444444",n=window.innerWidth/2,i=window.innerHeight/2;for(let o=0;o<50;o++){const a=document.createElement("div");a.className="confetti",a.style.backgroundColor=s,a.style.opacity=Math.random()*.5+.5,a.style.width=`${Math.random()*25+10}px`,a.style.height=a.style.width,a.style.borderRadius="50%",a.style.position="fixed",a.style.left=`${n}px`,a.style.top=`${i}px`,a.style.zIndex="999",document.body.appendChild(a);const h=Math.random()*Math.PI*2,c=Math.random()*250+250,l=Math.cos(h)*c,p=Math.sin(h)*c;setTimeout(()=>{a.style.transition="all 3s ease-out",a.style.transform=`translate(${l}px, ${p}px) rotate(${Math.random()*360}deg)`,a.style.opacity="0",setTimeout(()=>{document.body.removeChild(a)},3e3)},10)}}static showDisenchant(){const e="#888888",t=window.innerWidth/2,s=window.innerHeight/2;for(let n=0;n<20;n++){const i=document.createElement("div");i.className="confetti",i.style.backgroundColor=e,i.style.opacity=Math.random()*.4+.3,i.style.width=`${Math.random()*10+5}px`,i.style.height=i.style.width,i.style.borderRadius="50%",i.style.position="fixed",i.style.left=`${t}px`,i.style.top=`${s}px`,i.style.zIndex="999",document.body.appendChild(i);const o=Math.random()*Math.PI*2,a=Math.random()*50+150,h=Math.cos(o)*a,c=Math.sin(o)*a;setTimeout(()=>{i.style.transition="all 1.5s ease-out",i.style.transform=`translate(${h}px, ${c}px) rotate(${Math.random()*360}deg)`,i.style.opacity="0",setTimeout(()=>{document.body.removeChild(i)},1500)},10)}}}function x(r){const e=r.startsWith("/")?r.slice(1):r,t="/tap-game/";return`${t.endsWith("/")?t:`${t}/`}${e}`}const f=x;class b{static show(e,t){const s=document.createElement("div");s.className="item-overlay";const n=e.card?f(`images/cards/${e.card.toLowerCase()}.png`):"",i=f(e.image);s.innerHTML=`
      <div class="item-modal">
        <div class="item-image-container">
          <img src="${i}" alt="${e.name}" class="item-image" />
          ${n?`<img src="${n}" alt="${e.card}" class="card-badge" />`:""}
        </div>
        <div class="item-name">${e.name}</div>
        <div class="item-info">
          <div class="item-effect">${e.enhancedEffect}</div>
        </div>
        <button id="disenchant-item" class="disenchant-btn"> –†–∞—Å–ø—ã–ª–∏—Ç—å</button>
        <button id="close-item-modal"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(s),document.getElementById("disenchant-item").addEventListener("click",()=>{const o=b.getCompensation(e);t.addCurrency(o),t.removeItem(e),k.showDisenchant(),document.body.removeChild(s),alert(`–ü—Ä–µ–¥–º–µ—Ç —Ä–∞—Å–ø—ã–ª–µ–Ω. –ü–æ–ª—É—á–µ–Ω–æ: ${o} –¢–µ–Ω–µ–π.`)}),document.getElementById("close-item-modal").addEventListener("click",()=>{document.body.removeChild(s)})}static getCompensation(e){return Math.floor({A:5e3,B:3e3,C:1500,D:800,E:500,F:300,G:150,H:50}[e.card]||50)}}class M{constructor(e){this.game=e,this.isOpen=!1}show(){if(this.isOpen)return;this.isOpen=!0;const e=document.createElement("div");e.className="inventory-overlay",e.innerHTML=`
      <div class="inventory-modal">
        <h2 class="inventory-title"><i class="fas fa-backpack"></i> –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        <div class="inventory-grid">
          ${this.renderSlots()}
        </div>
        <button id="close-inventory"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(e),this.updateSlotListeners(e);const t=()=>{this.isOpen&&this.refreshSlots(e)};document.addEventListener("inventoryUpdated",t),document.getElementById("close-inventory").addEventListener("click",()=>{document.removeEventListener("inventoryUpdated",t),document.body.removeChild(e),this.isOpen=!1})}updateSlotListeners(e){e.querySelectorAll(".inventory-slot").forEach((s,n)=>{s.replaceWith(s.cloneNode(!0));const i=e.querySelectorAll(".inventory-slot")[n];i&&this.game.items[n]&&i.addEventListener("click",()=>{const o=this.game.items[n];o&&b.show(o,this.game)})})}refreshSlots(e){const t=e.querySelector(".inventory-grid");t.innerHTML=this.renderSlots(),this.updateSlotListeners(e)}renderSlots(){const e=[];for(let t=0;t<20;t++){const s=this.game.items[t];if(s){const n=f(s.image);e.push(`
          <div class="inventory-slot" title="${s.name}">
            <img src="${n}" alt="${s.name}" class="item-icon" />
          </div>
        `)}else e.push('<div class="inventory-slot empty"></div>')}return e.join("")}}const $=[{id:"click_power_1",name:"–°–∏–ª–∞ –ù–∞–∂–∞—Ç–∏—è I",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 1",type:"click",value:1,price:100,icon:"fa-hand-point-up",maxLevel:5,priceIncrease:1.5},{id:"click_power_2",name:"–°–∏–ª–∞ –ù–∞–∂–∞—Ç–∏—è II",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 5",type:"click",value:5,price:500,icon:"fa-fist-raised",maxLevel:3,priceIncrease:2},{id:"auto_income_1",name:"–¢–µ–Ω–∏ –≤ –ú–∏–Ω—É—Ç—É I",description:"–î–∞—ë—Ç 0.1 –¢–µ–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥—É",type:"auto",value:.1,price:300,icon:"fa-clock",maxLevel:10,priceIncrease:1.3},{id:"auto_income_2",name:"–¢–µ–Ω–∏ –≤ –ú–∏–Ω—É—Ç—É II",description:"–î–∞—ë—Ç 0.5 –¢–µ–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥—É",type:"auto",value:.5,price:1500,icon:"fa-hourglass-half",maxLevel:5,priceIncrease:1.5},{id:"click_multiplier",name:"–£–º–Ω–æ–∂–∏—Ç–µ–ª—å –ù–∞–∂–∞—Ç–∏—è",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 50%",type:"multiplier",value:1.5,price:1e3,icon:"fa-star",maxLevel:5,priceIncrease:2}];class L{constructor(e){this.game=e,this.upgrades=this.loadState()}loadState(){const e=localStorage.getItem("shopProgress");if(e)try{const t=JSON.parse(e);return $.map(s=>{const n=t.find(i=>i.id===s.id);return{...s,level:n?n.level:0,totalSpent:n?n.totalSpent:0}})}catch(t){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –º–∞–≥–∞–∑–∏–Ω–∞:",t)}return $.map(t=>({...t,level:0,totalSpent:0}))}saveState(){const e=this.upgrades.map(t=>({id:t.id,level:t.level,totalSpent:t.totalSpent}));localStorage.setItem("shopProgress",JSON.stringify(e))}getCurrentPrice(e){return e.level===0?e.price:Math.floor(e.price*Math.pow(e.priceIncrease,e.level))}buyUpgrade(e){const t=this.upgrades.find(n=>n.id===e);if(!t)return v.show("–£–ª—É—á—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"),!1;if(t.level>=t.maxLevel)return v.show(`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–ª—É—á—à–µ–Ω–∏—è "${t.name}" –¥–æ—Å—Ç–∏–≥–Ω—É—Ç`),!1;const s=this.getCurrentPrice(t);return this.game.getCurrency()<s?(v.show("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¢–µ–Ω–µ–π"),!1):(this.game.addCurrency(-s),t.level++,t.totalSpent+=s,this.applyUpgrade(t),this.saveState(),v.show(`${t.name} —É–ª—É—á—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è ${t.level}`),!0)}applyUpgrade(e){e.type==="click"?this.game.addShopClickBonus(e.value):e.type==="auto"?this.game.addShopAutoBonus(e.value):e.type==="multiplier"&&this.game.addShopMultiplier(e.value)}getUpgrades(){return this.upgrades.map(e=>({...e,currentPrice:this.getCurrentPrice(e),canAfford:this.game.getCurrency()>=this.getCurrentPrice(e),progressPercent:e.level/e.maxLevel*100}))}resetAllUpgrades(){let e=0;for(const t of this.upgrades)if(t.level>0)for(let s=0;s<t.level;s++){const n=Math.floor(t.price*Math.pow(t.priceIncrease,s));e+=n}return this.upgrades=this.upgrades.map(t=>({...t,level:0,totalSpent:0})),this.game.addCurrency(e),this.saveState(),this.game.resetShopBonuses(),e}}class A{constructor(e){this.game=e,this.shop=new L(e),this.isOpen=!1}show(){this.isOpen||(this.isOpen=!0,this.container=document.createElement("div"),this.container.className="shop-overlay",this.container.innerHTML=`
      <div class="shop-modal">
        <h2 class="shop-title"><i class="fas fa-store"></i> –ú–∞–≥–∞–∑–∏–Ω</h2>
        <div class="shop-grid">
          ${this.renderUpgrades()}
        </div>
        <button id="close-shop"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(this.container),this.updateBuyButtons(),document.getElementById("close-shop").addEventListener("click",()=>{document.body.removeChild(this.container),this.isOpen=!1}))}renderUpgrades(){return this.shop.getUpgrades().map(t=>{const s=t.level/t.maxLevel*100,n=this.shop.getCurrentPrice(t);return`
        <div class="shop-item ${t.canAfford?"affordable":""} ${t.level>=t.maxLevel?"maxed":""}">
          <div class="shop-item-icon">
            <i class="fas ${t.icon}"></i>
          </div>
          <div class="shop-item-info">
            <h3>${t.name}</h3>
            <p>${t.description}</p>
            <div class="shop-item-price">–¶–µ–Ω–∞: ${n} –¢–µ–Ω–µ–π</div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${s}%"></div>
            </div>
            <div class="progress-text">${t.level}/${t.maxLevel}</div>
            
            <!-- –û–±—â–∞—è –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–∞—è –≤–∞–ª—é—Ç–∞ -->
            ${t.totalSpent>0?`<div class="total-spent">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${t.totalSpent} –¢–µ–Ω–µ–π</div>`:""}
          </div>
          <button class="buy-btn" data-id="${t.id}" ${!t.canAfford||t.level>=t.maxLevel?"disabled":""}>
            ${t.level>=t.maxLevel?"–ú–∞–∫—Å.":"–ö—É–ø–∏—Ç—å"}
          </button>
        </div>
      `}).join("")}updateBuyButtons(){this.container.querySelectorAll(".buy-btn").forEach(t=>{const s=t.dataset.id;t.replaceWith(t.cloneNode(!0)),this.container.querySelector(`[data-id="${s}"]`).addEventListener("click",i=>{const o=i.target,a=o.dataset.id;this.shop.buyUpgrade(a),this.updateSingleItem(o)})})}updateSingleItem(e){const t=e.dataset.id,s=this.shop.upgrades.find(u=>u.id===t),n=this.shop.getCurrentPrice(s);s.level>=s.maxLevel?(e.textContent="–ú–∞–∫—Å.",e.disabled=!0):(e.textContent="–ö—É–ø–∏—Ç—å",e.disabled=!(this.game.getCurrency()>=n));const i=e.closest(".shop-item"),o=i.querySelector("h3"),a=i.querySelector(".shop-item-price"),h=i.querySelector(".progress-fill"),c=i.querySelector(".progress-text"),l=i.querySelector(".total-spent"),p=s.name;o.innerHTML=`${p} <span class="level-indicator">–£—Ä–æ–≤–µ–Ω—å ${s.level}/${s.maxLevel}</span>`,a.textContent=`–¶–µ–Ω–∞: ${n} –¢–µ–Ω–µ–π`;const m=s.level/s.maxLevel*100;if(h.style.width=`${m}%`,c.textContent=`${s.level}/${s.maxLevel}`,s.totalSpent>0)if(l)l.textContent=`–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${s.totalSpent} –¢–µ–Ω–µ–π`;else{const u=document.createElement("div");u.className="total-spent",u.textContent=`–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${s.totalSpent} –¢–µ–Ω–µ–π`,i.querySelector(".progress-text").after(u)}i.classList.toggle("affordable",this.game.getCurrency()>=n),i.classList.toggle("maxed",s.level>=s.maxLevel)}}class P{constructor(e,t){this.game=e,this.telegram=t}show(){const e=this.telegram?.initDataUnsafe?.user;if(!e){alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram");return}const t=document.createElement("div");t.className="profile-overlay",t.innerHTML=`
      <div class="profile-modal">
        <div class="profile-header">
          <img src="${e.photo_url||"https://via.placeholder.com/80"}" alt="Avatar" class="profile-avatar" onerror="this.src='https://via.placeholder.com/80'">
          <div class="profile-info">
            <h2 class="profile-name">${e.first_name} ${e.last_name||""}</h2>
            <p class="profile-username">@${e.username||"N/A"}</p>
            <p class="profile-id">ID: ${e.id}</p>
          </div>
        </div>
        
        <div class="profile-stats">
          <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <div class="stat-item">
            <span class="stat-label">–¢–µ–Ω–µ–π:</span>
            <span class="stat-value">${this.game.getCurrency().toFixed(2)}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">–°–∏–ª–∞ –Ω–∞–∂–∞—Ç–∏—è:</span>
            <span class="stat-value">${this.game.getClickValue().toFixed(2)}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">–ê–≤—Ç–æ-–¥–æ—Ö–æ–¥:</span>
            <span class="stat-value">${this.game.getAutoIncome().toFixed(2)}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">–ü—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ:</span>
            <span class="stat-value">${this.game.items.length}</span>
          </div>
        </div>
        
        <button id="reset-shop" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è</button>
        <button id="close-profile"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(t),document.getElementById("reset-shop").addEventListener("click",()=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞? –í—ã –ø–æ–ª—É—á–∏—Ç–µ –≤—Å–µ –¢–µ–Ω–∏ –∑–∞ –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è."))if(this.game.shopSystem){const s=this.game.shopSystem.resetAllUpgrades();alert(`–£–ª—É—á—à–µ–Ω–∏—è —Å–±—Ä–æ—à–µ–Ω—ã. –ü–æ–ª—É—á–µ–Ω–æ: ${s} –¢–µ–Ω–µ–π`)}else alert("–°–∏—Å—Ç–µ–º–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")}),document.getElementById("close-profile").addEventListener("click",()=>{document.body.removeChild(t)})}}const _="modulepreload",O=function(r){return"/tap-game/"+r},I={},N=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){let h=function(c){return Promise.all(c.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");n=h(t.map(c=>{if(c=O(c),c in I)return;I[c]=!0;const l=c.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":_,l||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),l)return new Promise((u,E)=>{m.addEventListener("load",u),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},T=[{id:"basic_chest",name:"–û–±—ã—á–Ω—ã–π —Å—É–Ω–¥—É–∫",description:"–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏ –∫–∞—Ä—Ç—É —Ä–∞–Ω–≥–∞ H - C",price:1e3,image:"images/chests/basic.png",minCard:"C",maxCard:"H",color:"#8B8B8B"},{id:"rare_chest",name:"–†–µ–¥–∫–∏–π —Å—É–Ω–¥—É–∫",description:"–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏ –∫–∞—Ä—Ç—É —Ä–∞–Ω–≥–∞ G - C",price:3e3,image:"images/chests/rare.png",minCard:"C",maxCard:"G",color:"#4CAF50"},{id:"epic_chest",name:"–≠–ø–∏—á–µ—Å–∫–∏–π —Å—É–Ω–¥—É–∫ –¢–µ–Ω–µ–π",description:"–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏ –∫–∞—Ä—Ç—É —Ä–∞–Ω–≥–∞ F - B",price:5e3,image:"images/chests/epic.png",minCard:"B",maxCard:"F",color:"#2196F3"},{id:"legendary_chest",name:"–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ê–ª—ã–π —Å—É–Ω–¥—É–∫",description:"–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏ –∫–∞—Ä—Ç—É —Ä–∞–Ω–≥–∞ E - A",price:2e4,image:"images/chests/legendary.png",minCard:"A",maxCard:"E",color:"#FF9800"},{id:"mythic_chest",name:"–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π —Å—É–Ω–¥—É–∫ –ö–æ—Ä–æ–ª—è",description:"–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏ –∫–∞—Ä—Ç—É —Ä–∞–Ω–≥–∞ D - A",price:5e4,image:"images/chests/mythic.png",minCard:"A",maxCard:"D",color:"#9C27B0"}];class F{constructor(e){this.game=e,this.chestTypes=T,this.isOpen=!1}show(){if(this.isOpen)return;this.isOpen=!0;const e=document.createElement("div");e.className="chest-shop-overlay",e.innerHTML=`
      <div class="chest-shop-modal">
        <h2 class="chest-shop-title"></i> Chest shop</h2>
        <div class="chest-shop-grid">
          ${this.renderChests()}
        </div>
        <button id="close-chest-shop"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(e),this.updateChestButtons(e),document.getElementById("close-chest-shop").addEventListener("click",()=>{document.body.removeChild(e),this.isOpen=!1})}renderChests(){return this.chestTypes.map(e=>{const t=this.game.getCurrency()>=e.price;return`
        <div class="chest-item ${t?"affordable":""}">
          <div class="chest-image-container">
            <img src="${f(e.image)}" alt="${e.name}" class="chest-image" />
          </div>
          <div class="chest-info">
            <h3>${e.name}</h3>
            <p>${e.description}</p>
            <div class="chest-price">–¶–µ–Ω–∞: ${e.price} –¢–µ–Ω–µ–π</div>
          </div>
          <button class="buy-chest-btn" data-id="${e.id}" ${t?"":"disabled"}>
            –ö—É–ø–∏—Ç—å
          </button>
        </div>
      `}).join("")}updateChestButtons(e){e.querySelectorAll(".buy-chest-btn").forEach(s=>{s.addEventListener("click",n=>{const i=n.target.dataset.id;this.buyChest(i)})})}buyChest(e){const t=this.chestTypes.find(s=>s.id===e);if(!t){alert("–°—É–Ω–¥—É–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω");return}if(this.game.getCurrency()<t.price){alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¢–µ–Ω–µ–π");return}this.game.addCurrency(-t.price),this.openChestWithRestrictions(t),this.close()}openChestWithRestrictions(e){const t=this.getAvailableCards(e.minCard,e.maxCard),s=t[Math.floor(Math.random()*t.length)],n=[{id:"lightning_dagger",name:"–ö–∏–Ω–∂–∞–ª –º–æ–ª–Ω–∏–∏",type:"active",baseBonus:.05,price:5e3,effect:"–®–∞–Ω—Å 5% —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ 2",stat:"click",image:"images/items/lightning_dagger.jpg"},{id:"chaos_seal",name:"–ü–µ—á–∞—Ç—å –•–∞–æ—Å–∞",type:"active",baseBonus:.03,price:8e3,effect:"–ö–∞–∂–¥—ã–µ 10 –Ω–∞–∂–∞—Ç–∏–π ‚Äî x5 –Ω–∞–≥—Ä–∞–¥—ã",stat:"click",image:"images/items/chaos_seal.jpg"},{id:"gloves_of_rage",name:"–ü–µ—Ä—á–∞—Ç–∫–∏ –ì–Ω–µ–≤–∞",type:"passive",baseBonus:1,price:3e3,effect:"+1 –¢–µ–Ω—å –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ",stat:"click",image:"images/items/gloves_of_rage.jpg"},{id:"eternal_clock",name:"–ß–∞—Å—ã –≠—Ç–µ—Ä–Ω–∞",type:"active",baseBonus:.1,price:12e3,effect:"–ù–∞ 10 —Å–µ–∫—É–Ω–¥ –≤—Å–µ –Ω–∞–∂–∞—Ç–∏—è –¥–∞—é—Ç x3",stat:"click",image:"images/items/eternal_clock.jpg"},{id:"shadow_hood",name:"–ö–∞–ø—é—à–æ–Ω –¢–µ–Ω–∏",type:"passive",baseBonus:.05,price:2e3,effect:"+5% –∫ –∞–≤—Ç–æ-–¥–æ–±—ã–≤–∞–Ω–∏—é",stat:"auto",image:"images/items/shadow_hood.jpg"}],i=n[Math.floor(Math.random()*n.length)],o=this.getBonusMultiplier(s),a=i.baseBonus*o,h={...i,card:s,bonusMultiplier:o,enhancedValue:a,enhancedEffect:`${i.effect} (+${Math.round(o*100)}%)`};this.showChestResult(s,h)}getAvailableCards(e,t){const s={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7},n=s[e],i=s[t];return Object.keys(s).filter(o=>s[o]>=n&&s[o]<=i)}getBonusMultiplier(e){return{A:1,B:.8,C:.4,D:.3,E:.2,F:.15,G:.1,H:.05}[e]||.05}showChestResult(e,t){N(async()=>{const{CardsDisplay:s}=await import("./CardsDisplay-DeDcxpL0.js");return{CardsDisplay:s}},[]).then(({CardsDisplay:s})=>{s.showCard(e,t,this.game)})}close(){const e=document.querySelector(".chest-shop-overlay");e&&(document.body.removeChild(e),this.isOpen=!1)}}const g=window.Telegram?.WebApp;g?(g.ready(),g.expand()):console.warn("Telegram Web App SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω");const d=new w;d.loadProgress();const B=new A(d),D=B.shop;d.shopSystem=D;const R=document.getElementById("currency"),C=document.getElementById("clicker"),H=document.getElementById("open-chest"),U=document.getElementById("inventory-btn"),V=document.getElementById("shop"),q=document.getElementById("profile");function S(){R.textContent=W(d.getCurrency())}function W(r){return r>=1e6?(r/1e6).toFixed(2)+"M":r>=1e3?(r/1e3).toFixed(2)+"K":r.toFixed(2)}C.addEventListener("click",()=>{d.addCurrency(d.getClickValue()),X()});const G=new F(d);H.addEventListener("click",()=>{G.show()});const j=new M(d);U.addEventListener("click",()=>{j.show()});V.addEventListener("click",()=>{B.show()});const J=new P(d,g);q.addEventListener("click",()=>{J.show()});function X(){C.style.transform="scale(0.9)",setTimeout(()=>{C.style.transform="scale(1)"},100)}document.addEventListener("currencyChanged",S);setInterval(()=>{d.saveProgress()},y.saveInterval);d.startAutoIncome();S();console.log("üéÆ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞. –ù–∞–∂–∏–º–∞–π!");export{k as C,v as N,f as i};
