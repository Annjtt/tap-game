(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();const p={baseClickValue:1,saveInterval:3e4};class d{static show(e,t=2e3){const s=document.createElement("div");s.className="notification",s.textContent=e,document.body.appendChild(s),setTimeout(()=>{s.classList.add("show")},10),setTimeout(()=>{s.classList.remove("show"),setTimeout(()=>{document.body.removeChild(s)},300)},t)}}class ${constructor(){this.currency=0,this.clickValue=p.baseClickValue,this.items=[],this.autoIncome=0,this.lastSave=Date.now(),this.bonusMultipliers={A:1,B:.8,C:.4,D:.3,E:.2,F:.15,G:.1,H:.05}}addCurrency(e){this.currency+=e,this.triggerEvent("currencyChanged")}getCurrency(){return this.currency}getClickValue(){let e=this.clickValue,t=0;const s=this.getActiveItemsByName();for(const n of Object.values(s))n.stat==="click"&&(t+=n.enhancedValue||n.baseBonus);return e+t}getAutoIncome(){let e=this.autoIncome,t=0;const s=this.getActiveItemsByName();for(const n of Object.values(s))n.stat==="auto"&&(t+=n.enhancedValue||n.baseBonus);return e+t}getActiveItemsByName(){const e={};for(const t of this.items){const s=t.name;if(!e[s])e[s]=t;else{const n=e[s].card,i=t.card;this.getCardRank(i)<this.getCardRank(n)&&(e[s]=t)}}return e}getCardRank(e){return{A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7}[e]||7}addItem(e){if(!e.card){console.warn("–ü—Ä–µ–¥–º–µ—Ç –±–µ–∑ –∫–∞—Ä—Ç—ã:",e);return}const t=this.items.find(s=>s.name===e.name);if(t){const s=this.getCardRank(e.card),n=this.getCardRank(t.card);if(s<n){const i=this.getCompensationForItem(t);this.addCurrency(i);const o=this.items.indexOf(t);this.items[o]=e,d.show(`–ü—Ä–µ–¥–º–µ—Ç "${e.name}" –∑–∞–º–µ–Ω–µ–Ω (${t.card} ‚Üí ${e.card}). –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${i} –¢–µ–Ω–µ–π`)}else if(s>n){const i=this.getCompensationForItem(e);this.addCurrency(i),d.show(`–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å "${t.name}" (${t.card}). –ù–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –º–µ–Ω–µ–µ —Ä–µ–¥–∫–∏–π (${e.card}). –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è: ${i} –¢–µ–Ω–µ–π`)}else{const i=this.items.indexOf(t);this.items[i]=e}}else this.items.push(e);this.updateStatsFromItems(),this.triggerEvent("inventoryUpdated")}getCompensationForItem(e){return Math.floor({A:5e3,B:3e3,C:1500,D:800,E:500,F:300,G:150,H:50}[e.card]||50)}removeItem(e){const t=this.items.indexOf(e);t>-1&&(this.items.splice(t,1),this.updateStatsFromItems(),this.triggerEvent("inventoryUpdated"))}updateStatsFromItems(){this.clickValue=p.baseClickValue,this.autoIncome=0;const e=this.getActiveItemsByName();for(const t of Object.values(e))t.stat==="click"&&(this.clickValue+=t.enhancedValue||t.baseBonus),t.stat==="auto"&&(this.autoIncome+=t.enhancedValue||t.baseBonus)}saveProgress(){const e={currency:this.currency,clickValue:this.clickValue,autoIncome:this.getAutoIncome(),items:this.items,timestamp:Date.now()};localStorage.setItem("tapGameProgress",JSON.stringify(e))}loadProgress(){const e=localStorage.getItem("tapGameProgress");if(e){const t=JSON.parse(e);this.currency=t.currency||0,this.items=t.items||[],this.updateStatsFromItems(),this.triggerEvent("progressLoaded")}}triggerEvent(e){document.dispatchEvent(new CustomEvent(e,{detail:this}))}startAutoIncome(){setInterval(()=>{this.getAutoIncome()>0&&this.addCurrency(this.getAutoIncome())},1e3)}update(){}}function w(){const c={A:.001,B:.005,C:.024,D:.05,E:.07,F:.1,G:.2,H:.55},e=Math.random();let t=0;for(const[s,n]of Object.entries(c))if(t+=n,e<=t)return s;return"H"}const E=[{id:"lightning_dagger",name:"–ö–∏–Ω–∂–∞–ª –º–æ–ª–Ω–∏–∏",type:"active",baseBonus:.05,price:5e3,effect:"–®–∞–Ω—Å 5% —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ 2",stat:"click",image:"images/items/lightning_dagger.jpg"},{id:"chaos_seal",name:"–ü–µ—á–∞—Ç—å –•–∞–æ—Å–∞",type:"active",baseBonus:.03,price:8e3,effect:"–ö–∞–∂–¥—ã–µ 10 –Ω–∞–∂–∞—Ç–∏–π ‚Äî x5 –Ω–∞–≥—Ä–∞–¥—ã",stat:"click",image:"images/items/chaos_seal.jpg"},{id:"gloves_of_rage",name:"–ü–µ—Ä—á–∞—Ç–∫–∏ –ì–Ω–µ–≤–∞",type:"passive",baseBonus:1,price:3e3,effect:"+1 –¢–µ–Ω—å –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ",stat:"click",image:"images/items/gloves_of_rage.jpg"},{id:"eternal_clock",name:"–ß–∞—Å—ã –≠—Ç–µ—Ä–Ω–∞",type:"active",baseBonus:.1,price:12e3,effect:"–ù–∞ 10 —Å–µ–∫—É–Ω–¥ –≤—Å–µ –Ω–∞–∂–∞—Ç–∏—è –¥–∞—é—Ç x3",stat:"click",image:"images/items/eternal_clock.jpg"},{id:"shadow_hood",name:"–ö–∞–ø—é—à–æ–Ω –¢–µ–Ω–∏",type:"passive",baseBonus:.05,price:2e3,effect:"+5% –∫ –∞–≤—Ç–æ-–¥–æ–±—ã–≤–∞–Ω–∏—é",stat:"auto",image:"images/items/shadow_hood.jpg"}];class k{constructor(e){this.game=e,this.cost=10}openChest(){if(this.game.getCurrency()<this.cost)return d.show("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¢–µ–Ω–µ–π!"),null;this.game.addCurrency(-this.cost);const e=w(),t=E.filter(a=>a.id!==void 0),s=t[Math.floor(Math.random()*t.length)],n=this.getBonusMultiplier(e),i=s.baseBonus*n,o={...s,card:e,bonusMultiplier:n,enhancedValue:i,enhancedEffect:`${s.effect} (+${Math.round(n*100)}%)`};return{card:e,item:o}}getBonusMultiplier(e){return{A:1,B:.8,C:.4,D:.3,E:.2,F:.15,G:.1,H:.05}[e]||.05}}class v{static show(e){const s={A:"#6a0dad",B:"#cc0000",C:"#0066cc",D:"#ffffff",E:"#888888",F:"#777777",G:"#666666",H:"#555555"}[e]||"#444444",n=window.innerWidth/2,i=window.innerHeight/2;for(let o=0;o<50;o++){const a=document.createElement("div");a.className="confetti",a.style.backgroundColor=s,a.style.opacity=Math.random()*.5+.5,a.style.width=`${Math.random()*25+10}px`,a.style.height=a.style.width,a.style.borderRadius="50%",a.style.position="fixed",a.style.left=`${n}px`,a.style.top=`${i}px`,a.style.zIndex="999",document.body.appendChild(a);const l=Math.random()*Math.PI*2,u=Math.random()*250+250,C=Math.cos(l)*u,I=Math.sin(l)*u;setTimeout(()=>{a.style.transition="all 3s ease-out",a.style.transform=`translate(${C}px, ${I}px) rotate(${Math.random()*360}deg)`,a.style.opacity="0",setTimeout(()=>{document.body.removeChild(a)},3e3)},10)}}static showDisenchant(){const e="#888888",t=window.innerWidth/2,s=window.innerHeight/2;for(let n=0;n<20;n++){const i=document.createElement("div");i.className="confetti",i.style.backgroundColor=e,i.style.opacity=Math.random()*.4+.3,i.style.width=`${Math.random()*10+5}px`,i.style.height=i.style.width,i.style.borderRadius="50%",i.style.position="fixed",i.style.left=`${t}px`,i.style.top=`${s}px`,i.style.zIndex="999",document.body.appendChild(i);const o=Math.random()*Math.PI*2,a=Math.random()*50+150,l=Math.cos(o)*a,u=Math.sin(o)*a;setTimeout(()=>{i.style.transition="all 1.5s ease-out",i.style.transform=`translate(${l}px, ${u}px) rotate(${Math.random()*360}deg)`,i.style.opacity="0",setTimeout(()=>{document.body.removeChild(i)},1500)},10)}}}function B(c){const e=c.startsWith("/")?c.slice(1):c,t="/tap-game/";return`${t.endsWith("/")?t:`${t}/`}${e}`}const m=B;class g{static showCard(e,t,s){v.show(e);const n=document.createElement("div");n.className="card-overlay";const i=m(`images/cards/${e.toLowerCase()}.png`),o=m(t.image);n.innerHTML=`
      <div class="card-modal">
        <div class="item-image-container">
          <img src="${o}" alt="${t.name}" class="item-image" />
          <img src="${i}" alt="${e}" class="card-badge" />
        </div>
        <h2>–í—ã–ø–∞–ª–∞ –∫–∞—Ä—Ç–∞: ${e}</h2>
        <p>${t.name}</p>
        <p>${t.enhancedEffect}</p>
        <button id="disenchant-card" class="disenchant-btn">‚ö° –†–∞—Å–ø—ã–ª–∏—Ç—å</button>
        <button id="close-card">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(n);const a=()=>{s.addItem(t),document.body.removeChild(n)};document.getElementById("disenchant-card").addEventListener("click",()=>{const l=g.getCompensation(t);s.addCurrency(l),document.body.removeChild(n),d.show(`–ü—Ä–µ–¥–º–µ—Ç —Ä–∞—Å–ø—ã–ª–µ–Ω. –ü–æ–ª—É—á–µ–Ω–æ: ${l} –¢–µ–Ω–µ–π.`)}),document.getElementById("close-card").addEventListener("click",()=>{a()}),setTimeout(()=>{document.body.contains(n)&&a()},5e3)}static getCompensation(e){return Math.floor({A:5e3,B:3e3,C:1500,D:800,E:500,F:300,G:150,H:50}[e.card]||50)}}class y{static show(e,t){const s=document.createElement("div");s.className="item-overlay";const n=e.card?m(`images/cards/${e.card.toLowerCase()}.png`):"",i=m(e.image);s.innerHTML=`
      <div class="item-modal">
        <div class="item-image-container">
          <img src="${i}" alt="${e.name}" class="item-image" />
          ${n?`<img src="${n}" alt="${e.card}" class="card-badge" />`:""}
        </div>
        <div class="item-name">${e.name}</div>
        <div class="item-info">
          <div class="item-effect">${e.enhancedEffect}</div>
        </div>
        <button id="disenchant-item" class="disenchant-btn">‚ö° –†–∞—Å–ø—ã–ª–∏—Ç—å</button>
        <button id="close-item-modal"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(s),document.getElementById("disenchant-item").addEventListener("click",()=>{const o=y.getCompensation(e);t.addCurrency(o),t.removeItem(e),v.showDisenchant(),document.body.removeChild(s),alert(`–ü—Ä–µ–¥–º–µ—Ç —Ä–∞—Å–ø—ã–ª–µ–Ω. –ü–æ–ª—É—á–µ–Ω–æ: ${o} –¢–µ–Ω–µ–π.`)}),document.getElementById("close-item-modal").addEventListener("click",()=>{document.body.removeChild(s)})}static getCompensation(e){return Math.floor({A:5e3,B:3e3,C:1500,D:800,E:500,F:300,G:150,H:50}[e.card]||50)}}class M{constructor(e){this.game=e,this.isOpen=!1}show(){if(this.isOpen)return;this.isOpen=!0;const e=document.createElement("div");e.className="inventory-overlay",e.innerHTML=`
      <div class="inventory-modal">
        <h2 class="inventory-title"><i class="fas fa-backpack"></i> –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        <div class="inventory-grid">
          ${this.renderSlots()}
        </div>
        <button id="close-inventory"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(e),this.updateSlotListeners(e);const t=()=>{this.isOpen&&this.refreshSlots(e)};document.addEventListener("inventoryUpdated",t),document.getElementById("close-inventory").addEventListener("click",()=>{document.removeEventListener("inventoryUpdated",t),document.body.removeChild(e),this.isOpen=!1})}updateSlotListeners(e){e.querySelectorAll(".inventory-slot").forEach((s,n)=>{s.replaceWith(s.cloneNode(!0));const i=e.querySelectorAll(".inventory-slot")[n];i&&this.game.items[n]&&i.addEventListener("click",()=>{const o=this.game.items[n];o&&y.show(o,this.game)})})}refreshSlots(e){const t=e.querySelector(".inventory-grid");t.innerHTML=this.renderSlots(),this.updateSlotListeners(e)}renderSlots(){const e=[];for(let t=0;t<20;t++){const s=this.game.items[t];if(s){const n=m(s.image);e.push(`
          <div class="inventory-slot" title="${s.name}">
            <img src="${n}" alt="${s.name}" class="item-icon" />
          </div>
        `)}else e.push('<div class="inventory-slot empty"></div>')}return e.join("")}}const L=[{id:"click_power_1",name:"–°–∏–ª–∞ –ù–∞–∂–∞—Ç–∏—è I",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 1",type:"click",value:1,price:100,icon:"fa-hand-point-up"},{id:"click_power_2",name:"–°–∏–ª–∞ –ù–∞–∂–∞—Ç–∏—è II",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 5",type:"click",value:5,price:500,icon:"fa-fist-raised"},{id:"auto_income_1",name:"–¢–µ–Ω–∏ –≤ –ú–∏–Ω—É—Ç—É I",description:"–î–∞—ë—Ç 0.1 –¢–µ–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥—É",type:"auto",value:.1,price:300,icon:"fa-clock"},{id:"auto_income_2",name:"–¢–µ–Ω–∏ –≤ –ú–∏–Ω—É—Ç—É II",description:"–î–∞—ë—Ç 0.5 –¢–µ–Ω–∏ –≤ —Å–µ–∫—É–Ω–¥—É",type:"auto",value:.5,price:1500,icon:"fa-hourglass-half"},{id:"click_multiplier",name:"–£–º–Ω–æ–∂–∏—Ç–µ–ª—å –ù–∞–∂–∞—Ç–∏—è",description:"–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ 50%",type:"multiplier",value:1.5,price:1e3,icon:"fa-star"}];class S{constructor(e){this.game=e,this.upgrades=L.map(t=>({...t,purchased:!1,level:0}))}buyUpgrade(e){const t=this.upgrades.find(s=>s.id===e);return t?t.purchased&&t.type!=="multiplier"?(d.show("–≠—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ —É–∂–µ –∫—É–ø–ª–µ–Ω–æ"),!1):this.game.getCurrency()<t.price?(d.show("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¢–µ–Ω–µ–π"),!1):(this.game.addCurrency(-t.price),t.type==="multiplier"?(t.level++,this.applyMultiplierUpgrade(t)):(t.purchased=!0,this.applyUpgrade(t)),d.show(`–ö—É–ø–ª–µ–Ω–æ: ${t.name}`),!0):(d.show("–£–ª—É—á—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"),!1)}applyUpgrade(e){e.type==="click"?this.game.clickValue+=e.value:e.type==="auto"&&(this.game.autoIncome+=e.value)}applyMultiplierUpgrade(e){this.game.clickValue=Math.round(this.game.clickValue*e.value)}getUpgrades(){return this.upgrades}}class x{constructor(e){this.game=e,this.shop=new S(e),this.isOpen=!1}show(){if(this.isOpen)return;this.isOpen=!0;const e=document.createElement("div");e.className="shop-overlay",e.innerHTML=`
      <div class="shop-modal">
        <h2 class="shop-title"><i class="fas fa-store"></i> –ú–∞–≥–∞–∑–∏–Ω</h2>
        <div class="shop-grid">
          ${this.renderUpgrades()}
        </div>
        <button id="close-shop"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    `,document.body.appendChild(e),this.updateBuyButtons(e),document.getElementById("close-shop").addEventListener("click",()=>{document.body.removeChild(e),this.isOpen=!1})}renderUpgrades(){const e=this.shop.getUpgrades(),t=this.game.getCurrency();return e.map(s=>{const n=t>=s.price,i=s.purchased&&s.type!=="multiplier",o=s.level>0&&s.type==="multiplier";return`
        <div class="shop-item ${n?"affordable":""} ${i||o?"purchased":""}">
          <div class="shop-item-icon">
            <i class="fas ${s.icon}"></i>
          </div>
          <div class="shop-item-info">
            <h3>${s.name}</h3>
            <p>${s.description}</p>
            <div class="shop-item-price">–¶–µ–Ω–∞: ${s.price} –¢–µ–Ω–µ–π</div>
            ${s.level>0?`<div class="shop-item-level">–£—Ä–æ–≤–µ–Ω—å: ${s.level}</div>`:""}
          </div>
          <button class="buy-btn" data-id="${s.id}" ${!n||i||o?"disabled":""}>
            ${i||o?"–ö—É–ø–ª–µ–Ω–æ":"–ö—É–ø–∏—Ç—å"}
          </button>
        </div>
      `}).join("")}updateBuyButtons(e){e.querySelectorAll(".buy-btn").forEach(s=>{s.addEventListener("click",n=>{const i=n.target.dataset.id;this.shop.buyUpgrade(i),setTimeout(()=>{const o=document.createElement("div");o.className="shop-overlay",o.innerHTML=`
            <div class="shop-modal">
              <h2 class="shop-title"><i class="fas fa-store"></i> –ú–∞–≥–∞–∑–∏–Ω</h2>
              <div class="shop-grid">
                ${this.renderUpgrades()}
              </div>
              <button id="close-shop"><i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
          `,e.parentElement.replaceChild(o,e),this.updateBuyButtons(o),document.getElementById("close-shop").addEventListener("click",()=>{document.body.removeChild(o),this.isOpen=!1}),e=o},100)})})}}const h=window.Telegram?.WebApp;h?(h.ready(),h.expand()):console.warn("Telegram Web App SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω");const r=new $;r.loadProgress();const A=document.getElementById("currency"),f=document.getElementById("clicker"),O=document.getElementById("open-chest"),N=document.getElementById("inventory-btn"),F=document.getElementById("shop");function b(){A.textContent=V(r.getCurrency())}function V(c){return c>=1e6?(c/1e6).toFixed(2)+"M":c>=1e3?(c/1e3).toFixed(2)+"K":c.toFixed(2)}f.addEventListener("click",()=>{r.addCurrency(r.getClickValue()),P()});const T=new k(r);O.addEventListener("click",()=>{const c=T.openChest();c&&g.showCard(c.card,c.item,r)});const _=new M(r);N.addEventListener("click",()=>{_.show()});const H=new x(r);F.addEventListener("click",()=>{H.show()});function P(){f.style.transform="scale(0.9)",setTimeout(()=>{f.style.transform="scale(1)"},100)}document.addEventListener("currencyChanged",b);setInterval(()=>{r.saveProgress()},p.saveInterval);r.startAutoIncome();b();console.log("üéÆ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞. –ù–∞–∂–∏–º–∞–π!");
